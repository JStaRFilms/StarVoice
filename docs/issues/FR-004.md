# [FR-004] Auto-Paste at Cursor Location

## Labels
`MUS`, `core`, `clipboard`, `tauri`

## User Story
As a user, I want the transcribed text to be automatically pasted at my cursor location, so that I can immediately use the transcription without manual copy-paste.

## Proposed Solution

### Overview
Use Tauri's clipboard and keyboard simulation APIs to paste transcribed text at the current cursor position. The text should be copied to clipboard first, then a paste command simulated.

### Implementation Flow
1. Transcription completes successfully
2. Text copied to system clipboard
3. Simulate Ctrl+V (or Cmd+V on Mac) keystroke
4. Text appears at cursor location in active application
5. Show success notification

### Technical Approach

**Rust Backend:**
```rust
// src-tauri/src/commands/clipboard.rs
use tauri_plugin_clipboard_manager::ClipboardExt;
use tauri_plugin_shell::ShellExt;

#[tauri::command]
pub async fn paste_text(app: tauri::AppHandle, text: String) -> Result<(), String> {
    // Copy text to clipboard
    app.clipboard()
        .write_text(text)
        .map_err(|e| e.to_string())?;
    
    // Simulate paste keystroke
    // Note: This requires enigo or similar crate for keyboard simulation
    use enigo::{Enigo, KeyboardControllable, Key};
    
    let mut enigo = Enigo::new();
    enigo.key_down(Key::Control);
    enigo.key_click(Key::Layout('v'));
    enigo.key_up(Key::Control);
    
    Ok(())
}
```

**Alternative Approach (if keyboard simulation is problematic):**
```rust
// Just copy to clipboard and show notification
#[tauri::command]
pub async fn copy_to_clipboard(app: tauri::AppHandle, text: String) -> Result<(), String> {
    app.clipboard()
        .write_text(text)
        .map_err(|e| e.to_string())?;
    
    // Show notification to user
    app.notification()
        .builder()
        .title("StarVoice")
        .body("Transcription copied to clipboard!")
        .show()
        .map_err(|e| e.to_string())?;
    
    Ok(())
}
```

### Key Considerations
- Keyboard simulation may not work in all applications (elevated permissions apps)
- Provide fallback: always copy to clipboard + notification
- Respect user's auto-paste setting (some users may prefer manual paste)
- Handle clipboard access permissions

## Acceptance Criteria

- [ ] Transcribed text copied to system clipboard
- [ ] Text pasted at cursor location in active window
- [ ] Success notification shown after paste
- [ ] Fallback to clipboard-only if paste fails
- [ ] Works across different applications (browsers, IDEs, etc.)
- [ ] Respects user's auto-paste preference setting
- [ ] macOS: Uses Cmd+V, Windows/Linux: Uses Ctrl+V
